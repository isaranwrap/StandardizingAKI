

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to the akiFlagger documentation! &mdash; akiFlagger 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> akiFlagger
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="MoreInformation.html">More information</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">akiFlagger</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Welcome to the akiFlagger documentation!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="welcome-to-the-akiflagger-documentation">
<h1>Welcome to the akiFlagger documentation!<a class="headerlink" href="#welcome-to-the-akiflagger-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#methods-of-calculating-aki">Methods of calculating AKI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#example-rolling-window">Example: Rolling-window</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#example-back-calculation">Example: Back-calculation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MoreInformation.html">More information</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Acute Kidney Injury (AKI) is a sudden onset of kidney failure and damage marked by an increase in the serum creatinine levels
(amongst other biomarkers) of the patient. Kidney Disease Improving Global Outcomes (KDIGO) has a set of guidelines and standard definitions
of AKI:</p>
<ul class="simple">
<li><p><em>Stage 1:</em> 50% increase in creatinine in &lt; 7 days or 0.3 increase in creatinine in &lt; 48 hours</p></li>
<li><p><em>Stage 2:</em> 100% increase in (or doubling of) creatinine in &lt; 7 days</p></li>
<li><p><em>Stage 3:</em> 200% increase in (or tripling of) creatinine in &lt; 7 days</p></li>
</ul>
<p>This package contains a flagger to determine if a patient has developed AKI based on the criterion above.
More information about the specific data input format and examples can be found in the <cite>Getting started</cite> section.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>You can install the flagger with <code class="docutils literal notranslate"><span class="pre">pip</span></code>. Simply type the following into command line and the
package should install properly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">akiFlagger</span>
</pre></div>
</div>
<p>To ensure that it is working properly, you can open a Python session and test it with.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">akiFlagger</span>

<span class="n">akiFlagger</span><span class="o">.</span><span class="n">__version__</span>

<span class="o">&gt;&gt;</span> <span class="s1">&#39;0.0.3&#39;</span>
</pre></div>
</div>
<p>Alternatively, you can download the source and wheel files to build manually from <a class="reference external" href="https://pypi.org/project/akiFlagger/">https://pypi.org/project/akiFlagger/</a>.</p>
</div>
<div class="section" id="methods-of-calculating-aki">
<h2>Methods of Calculating AKI<a class="headerlink" href="#methods-of-calculating-aki" title="Permalink to this headline">¶</a></h2>
<p>There are two methods to retroactively determine if a patient has developed AKI: <code class="docutils literal notranslate"><span class="pre">rolling-window</span></code> and <code class="docutils literal notranslate"><span class="pre">back-calculation</span></code>.</p>
<dl class="option">
<dt id="cmdoption-arg-rolling">
<code class="sig-name descname">Rolling</code><code class="sig-prename descclassname"> Window</code><a class="headerlink" href="#cmdoption-arg-rolling" title="Permalink to this definition">¶</a></dt>
<dd><p>The rolling window definition of AKI is based on the change in creatinine in a 48 hour or 7 day <a class="reference external" href="https://www.mathworks.com/help/econ/rolling-window-estimation-of-state-space-models.html">rolling window</a> period.
These are the stages mentioned in the KDIGO guidelines in the <cite>Introduction</cite>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-back-calculation">
<code class="sig-name descname">Back-calculation</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-back-calculation" title="Permalink to this definition">¶</a></dt>
<dd><p>The back-calculated definition of AKI is based on retroactively imputing baseline creatinine values. This is done by taking the <em>median</em>
of the patient’s outpatient creatinine values from 365 to 7 days prior to admission and setting that as the baseline creatinine. Then, the
first KDIGO criterion for <em>Stage 1</em> is applied (the 50% increase in creatinine in &lt; 7 days). If the condition is satisfied, the patient is considered to have AKI.</p>
<p>If there are no outpatient creatinine values measured for the patient from 365 to 7 days prior to admission, it is possible to still impute a
baseline creatinine value based on the patients demographics: namely their age, sex, and race.</p>
</dd></dl>

</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>This package is meant to handle patient data. Let’s walk through an example of how to use this package
with some toy data since real patient data is probably protected health information.</p>
<p>Once you’ve installed the package following the instructions in <cite>Installation</cite>, you’re ready to get started.
To begin with, we’ll import the <code class="docutils literal notranslate"><span class="pre">akiFlagger</span></code> module as well as the trifecta <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">pyplot</span>

<span class="kn">import</span> <span class="nn">akiFlagger</span>
<span class="nb">print</span><span class="p">(</span><span class="n">akiFlagger</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="o">&gt;&gt;</span> <span class="s1">&#39;0.0.3&#39;</span>
</pre></div>
</div>
<div class="admonition-tip admonition">
<p class="admonition-title">Tip!</p>
<p>The input dataframe needs to contain the correct columns in order for the flagger to recognize and deal with the proper variables.
Some pre-processing may be necessary. Here are the required columns depending on which calculation methods
you are interested in:</p>
<ul class="simple">
<li><p><em>Rolling-window</em>: <strong>mrn</strong>, <strong>enc</strong>, <strong>admission</strong>, <strong>creatinine</strong>, and <strong>time</strong>.</p></li>
<li><p><em>Back-calculation</em>: <strong>mrn</strong>, <strong>enc</strong>, <strong>admission</strong>, and <strong>time</strong>.</p></li>
<li><p><em>eGFR-imputed baseline creatinine</em>: <strong>age</strong>, <strong>sex</strong> (female or not), and <strong>race</strong> (black or not).</p></li>
</ul>
</div>
<div class="section" id="example-rolling-window">
<h3>Example: Rolling-window<a class="headerlink" href="#example-rolling-window" title="Permalink to this headline">¶</a></h3>
<p>Generally speaking, real patient data will be protected health information, so this walkthrough will use toy data.
The flagger comes with a built-in generator for toy data, which we can call with the following command.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>df = akiFlagger.generate_toy_data()

&gt;&gt; Successfully generated toy data!
</pre></div>
</div>
<p>We can take a look at what our dataframe looks like. <code class="docutils literal notranslate"><span class="pre">df.head()</span></code> should yield this:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 29%" />
<col style="width: 27%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>mrn</p></th>
<th class="head"><p>enc</p></th>
<th class="head"><p>admission</p></th>
<th class="head"><p>time</p></th>
<th class="head"><p>creat</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>12732</p></td>
<td><p>25741</p></td>
<td><p>2020-02-27 11:42:42</p></td>
<td><p>2020-02-29 05:42:42</p></td>
<td><p>1.116895</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>19845</p></td>
<td><p>81382</p></td>
<td><p>2020-05-12 06:02:54</p></td>
<td><p>2020-05-09 12:02:54</p></td>
<td><p>0.390540</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>13264</p></td>
<td><p>89464</p></td>
<td><p>2020-01-10 11:16:57</p></td>
<td><p>2020-01-10 17:16:57</p></td>
<td><p>1.353141</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>14859</p></td>
<td><p>75180</p></td>
<td><p>2020-06-07 12:27:38</p></td>
<td><p>2020-06-09 18:27:38</p></td>
<td><p>1.182348</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>19225</p></td>
<td><p>94917</p></td>
<td><p>2020-03-26 21:16:49</p></td>
<td><p>2020-03-23 21:16:49</p></td>
<td><p>1.232916</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The column names should be named exactly as they are in the examples. The full list of acceptable names can be found
in the <em>returnAKIpatients()</em> function in the <a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a> section.</p>
</div>
<p>Running the following should run the flagger for <code class="docutils literal notranslate"><span class="pre">rolling-window</span></code> AKI.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rw</span> <span class="o">=</span> <span class="n">akiFlagger</span><span class="o">.</span><span class="n">returnAKIpatients</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">aki_calc_type</span> <span class="o">=</span> <span class="s1">&#39;rolling_window&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the data frame has increased in size by quite a bit! Let’s check out whats been added:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 9%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
<th class="head"><p>creat</p></th>
<th class="head"><p>mincreat_48hr</p></th>
<th class="head"><p>mincreat_7day</p></th>
<th class="head"><p>deltacreat_48hr</p></th>
<th class="head"><p>deltacreat_7day</p></th>
<th class="head"><p>rollingwindow_aki</p></th>
<th class="head"><p>stage1</p></th>
<th class="head"><p>stage2</p></th>
<th class="head"><p>stage3</p></th>
</tr>
<tr class="row-even"><th class="head"><p>mrn</p></th>
<th class="head"><p>time</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p><strong>12732</strong></p></td>
<td><dl class="simple">
<dt><strong>2020-02-22</strong></dt><dd><p><strong>23:42:42</strong></p>
</dd>
</dl>
</td>
<td><p>1.116895</p></td>
<td><p>1.116895</p></td>
<td><p>1.116895</p></td>
<td><p>0.00000</p></td>
<td><p>0.00000</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td></td>
<td><dl class="simple">
<dt><strong>2020-02-25</strong></dt><dd><p><strong>05:42:42</strong></p>
</dd>
</dl>
</td>
<td><p>0.842858</p></td>
<td><p>0.842858</p></td>
<td><p>0.842858</p></td>
<td><p>0.00000</p></td>
<td><p>0.00000</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><dl class="simple">
<dt><strong>2020-02-26</strong></dt><dd><p><strong>11:42:42</strong></p>
</dd>
</dl>
</td>
<td><p>1.359735</p></td>
<td><p>0.842858</p></td>
<td><p>0.842858</p></td>
<td><p>0.51688</p></td>
<td><p>0.51688</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td></td>
<td><dl class="simple">
<dt><strong>2020-02-27</strong></dt><dd><p><strong>05:42:42</strong></p>
</dd>
</dl>
</td>
<td><p>1.275845</p></td>
<td><p>1.275845</p></td>
<td><p>1.275845</p></td>
<td><p>0.00000</p></td>
<td><p>0.43299</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><dl class="simple">
<dt><strong>2020-02-28</strong></dt><dd><p><strong>23:42:42</strong></p>
</dd>
</dl>
</td>
<td><p>1.277589</p></td>
<td><p>1.277589</p></td>
<td><p>1.275845</p></td>
<td><p>0.00174</p></td>
<td><p>0.43473</p></td>
<td><p>True</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
<p>The <strong>mincreat_48hr</strong> and <strong>mincreat_7day</strong> give us the running minimum for the selected window. Note that
<em>returnAKIpatients()</em> takes <code class="docutils literal notranslate"><span class="pre">cond1time</span></code> and <code class="docutils literal notranslate"><span class="pre">cond2time</span></code> as optional arguments. By default, these values are set to
‘48hours’ and ‘168hours’, which correspond to the 2-day and 7-day rolling window time periods. However, often some researchers
like to put a padding of some sort on the windows to account for logging lag. In this case, we would modify the <code class="docutils literal notranslate"><span class="pre">cond1time</span></code> and
<code class="docutils literal notranslate"><span class="pre">cond2time</span></code> variables to have the padding, for 4 hours, say, you would have ‘52hours’ and ‘172hours’.</p>
<p>The <strong>deltacreat_48hrs</strong> and <strong>deltacreat_7day</strong> give us the change in creatinine from the corresponding minimum values.
This is where the check occurs to qualify as stage 1, 2, or 3 AKI.</p>
<p>The <strong>stage 1, stage 2</strong>, and <strong>stage3</strong> columns are the AKI stages as per the KDIGO standards and if any of them are <em>True</em>,
then the <strong>rollingwindow_aki</strong> column will be <em>True</em>. Otherwise, <strong>rollingwindow_aki</strong> will be <em>False</em>.</p>
<p>I encourage you to play around more with the dataframe to get an idea for how the data should be shaped and how the flagger works.</p>
</div>
<div class="section" id="example-back-calculation">
<h3>Example: Back-calculation<a class="headerlink" href="#example-back-calculation" title="Permalink to this headline">¶</a></h3>
<p>Say we wanted to see who has AKI according to the back-calculation method. Now, we need to have information about the
age, sex, and race of the patient. The built-in generator has an option to include patient demographics:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>df = akiFlagger.generate_toy_data(include_demographic_info = True)

&gt;&gt; Successfully generated toy data!
</pre></div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h3>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Introduction.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright MIT License

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>