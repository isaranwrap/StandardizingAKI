

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>akiFlagger package &mdash; akiFlagger 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> akiFlagger
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../MoreInformation.html">More information</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">akiFlagger</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>akiFlagger package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/source/akiFlagger.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="akiflagger-package">
<h1>akiFlagger package<a class="headerlink" href="#akiflagger-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-akiFlagger.akiFlagger">
<span id="akiflagger-akiflagger-module"></span><h2>akiFlagger.akiFlagger module<a class="headerlink" href="#module-akiFlagger.akiFlagger" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="akiFlagger.akiFlagger.addBackCalcAKI">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">addBackCalcAKI</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">cond2time='168hours'</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.addBackCalcAKI" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the back-calculated AKI conditions, the KDIGO standards on the outpatient values;
i.e. a 50% increase from baseline creatinine in &lt;7 days. Back-calculated AKI is based on the baseline creatinine, defined in the addBaselineCreat() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pd.DataFrame</em>) – dataframe, typically of a single encounter.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with back-calculated aki values added in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pd.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.addBaselineCreat">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">addBaselineCreat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">eGFR_impute=False</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.addBaselineCreat" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the baseline creatinine to a dataframe. The baseline creatinine is defined as the median of the outpatient
creatinine values from 365 to 7 days prior to admission.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – dataframe, typically of a single patient.</p></li>
<li><p><strong>eGFR_impute</strong> (<em>bool</em>) – boolean, whether or not to impute the null baseline creatinines with the age/sex/race and eGFR of 75</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with baseline creatinine values added in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pd.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.addRollingWindowAKI">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">addRollingWindowAKI</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">add_stages=True</em>, <em class="sig-param">cond1time='48hours'</em>, <em class="sig-param">cond2time='168hours'</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.addRollingWindowAKI" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the AKI conditions based on rolling window definition:</p>
<ul class="simple">
<li><p><em>Stage 1:</em> 0.3 increase in serum creatinine in &lt; 48 hours OR 50% increase in serum creatinine in &lt; 7 days (168 hours)</p></li>
<li><p><em>Stage 2:</em> 100% increase in (or doubling of) serum creatinine in &lt; 48 hours</p></li>
<li><p><em>Stage 3:</em> 200% increase in (our tripling of) serum creatinine in &lt; 48 hours</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – dataframe, typically of a single encounter.</p></li>
<li><p><strong>add_stages</strong> (<em>bool</em>) – boolean, default <strong>True</strong>.
Choose whether or not to delineate the rolling-window AKI into the three stages (if False it will just lump Stage 1/2/3 into a boolean True/False)</p></li>
<li><p><strong>cond1time</strong> (<em>str</em>) – string, default <strong>‘48hours’</strong>.
The amount of time for the rolling-window according to the first criterion; i.e. 0.3 increase in creatinine in <code class="docutils literal notranslate"><span class="pre">cond1time</span></code> hours.</p></li>
<li><p><strong>cond2time</strong> (<em>str</em>) – string, default <strong>‘168hours’</strong>.
The amount of time for the rolling-window according to the second criterion; i.e. 50% increase in creatinine in <code class="docutils literal notranslate"><span class="pre">cond2time</span></code> hours.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with rolling-window aki values added in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pd.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.eGFR">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">eGFR</code><span class="sig-paren">(</span><em class="sig-param">creat</em>, <em class="sig-param">age</em>, <em class="sig-param">female</em>, <em class="sig-param">black</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.eGFR" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the estimated glomerular filtration rate based on the serum creatinine levels, age, sex, and race.
Based on the formula in the paper A New Equation to Estimate Glomerular Filtration Rate (Levey et. Al, 2009) linked below.</p>
<p>Equation: <a class="reference external" href="https://www.niddk.nih.gov/health-information/professionals/clinical-tools-patient-management/kidney-disease/laboratory-evaluation/glomerular-filtration-rate/estimating">https://www.niddk.nih.gov/health-information/professionals/clinical-tools-patient-management/kidney-disease/laboratory-evaluation/glomerular-filtration-rate/estimating</a></p>
<p>Full paper: <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/19414839/">https://pubmed.ncbi.nlm.nih.gov/19414839/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>creat</strong> (<em>float</em><em> or </em><em>array of floats</em>) – the creatinine value(s) of the patient(s).</p></li>
<li><p><strong>age</strong> (<em>float</em><em> or </em><em>array of floats</em>) – the age(s) of the patient(s).</p></li>
<li><p><strong>female</strong> (<em>bool</em><em> or </em><em>array of bools</em>) – whether or not the patient is female (female is True).</p></li>
<li><p><strong>black</strong> (<em>bool</em><em> or </em><em>array of bools</em>) – whether or not the patient is black (black is True).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the estimated glomerular filtration rate based on the CKD-EPI equation.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>egfr (float or array of floats)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.eGFRbasedCreatImputation">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">eGFRbasedCreatImputation</code><span class="sig-paren">(</span><em class="sig-param">age</em>, <em class="sig-param">sex</em>, <em class="sig-param">race</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.eGFRbasedCreatImputation" title="Permalink to this definition">¶</a></dt>
<dd><p>Imputes the baseline creatinine values for those patients missing outpatient creatinine measurements from 365 to 7 days prior to admisison.
The imputation is based on the <a class="reference external" href="https://www.niddk.nih.gov/health-information/professionals/clinical-tools-patient-management/kidney-disease/laboratory-evaluation/glomerular-filtration-rate/estimating">CKD-EPI equation</a>
from the paper <em>A New Equation to Estimate Glomerular Filtration Rate (Levey et. Al, 2009)</em> linked below.</p>
<p>We assume a GFR of 75 (mL/min/1.73 m^2) and then estimate a creatinine value based on the patient demographics.</p>
<p>Equation: <a class="reference external" href="https://www.niddk.nih.gov/health-information/professionals/clinical-tools-patient-management/kidney-disease/laboratory-evaluation/glomerular-filtration-rate/estimating">https://www.niddk.nih.gov/health-information/professionals/clinical-tools-patient-management/kidney-disease/laboratory-evaluation/glomerular-filtration-rate/estimating</a></p>
<p>Full paper: <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/19414839/">https://pubmed.ncbi.nlm.nih.gov/19414839/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>age</strong> (<em>float</em><em> or </em><em>array of floats</em>) – the age(s) of the patient(s).</p></li>
<li><p><strong>sex</strong> (<em>bool</em><em> or </em><em>array of bools</em>) – whether or not the patient is female (female is True).</p></li>
<li><p><strong>race</strong> (<em>bool</em><em> or </em><em>array of bools</em>) – whether or not the patient is black (black is True).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the imputed creatinine value(s) of the patient(s).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>creat (float or array of floats)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.generate_toy_data">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">generate_toy_data</code><span class="sig-paren">(</span><em class="sig-param">num_patients=100</em>, <em class="sig-param">num_encounters_range=(3</em>, <em class="sig-param">10)</em>, <em class="sig-param">include_demographic_info=False</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.generate_toy_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates toy data for demonstrating how the flagger works.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_patients</strong> (<em>int</em>) – integer, default 100.
Number of patients to generate</p></li>
<li><p><strong>num_encounters_range</strong> (<em>tuple</em>) – tuple, default (3, 10).
Number of encounters per patient will be randomly selected from a range between this tuple.</p></li>
<li><p><strong>include_demographic_info</strong> (<em>bool</em>) – boolean, default False.
Whether or not to include the demographic information in the generated dataset</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with toy numbers to work with.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pd.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="akiFlagger.akiFlagger.returnAKIpatients">
<code class="sig-prename descclassname">akiFlagger.akiFlagger.</code><code class="sig-name descname">returnAKIpatients</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">aki_calc_type='both'</em>, <em class="sig-param">keep_extra_cols=True</em>, <em class="sig-param">cond1time='48hours'</em>, <em class="sig-param">cond2time='168hours'</em>, <em class="sig-param">eGFR_impute=False</em>, <em class="sig-param">add_stages=True</em><span class="sig-paren">)</span><a class="headerlink" href="#akiFlagger.akiFlagger.returnAKIpatients" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns patients with AKI according to the KDIGO guidelines. The KDIGO guidelines are as follows:</p>
<ul class="simple">
<li><p><em>Stage 1:</em> 0.3 increase in serum creatinine in &lt; 48 hours OR 50% increase in serum creatinine in &lt; 7 days (168 hours)</p></li>
<li><p><em>Stage 2:</em> 100% increase in (or doubling of) serum creatinine in &lt; 48 hours</p></li>
<li><p><em>Stage 3:</em> 200% increase in (our tripling of) serum creatinine in &lt; 48 hours</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – Patient dataframe, should include some sort of patient and encounter identifier(s) and age, sex, race, serum creatinine and timestamps.</p></li>
<li><p><strong>aki_calc_type</strong> (<em>str</em>) – string, “rolling_window”, “back_calculate”, and “both” are the acceptable values, corresponding to the desired AKI calculation type to be returned.</p></li>
<li><p><strong>keep_extra_cols</strong> (<em>bool</em>) – boolean, default True.
Choose whether or not to keep the extra columns added in the calculation process. The extra columns added throughout the process are:
(1) the minimum creatinine in the 48 hour rolling window period
(2) the minimum creatinine in the 7 day rolling window period
(3) the change in creatinine between the creatinine at the given timestamp and the minimum of the previous 48 hours
(4) the change in creatinine between the creatinine at the given timestamp and the minimum of the previous 7 days
(5) The imputed baseline creatinine value</p></li>
<li><p><strong>cond1time</strong> (<em>str</em>) – string, default ‘48hours’.
The amount of time for the rolling-window according to the first criterion; i.e. 0.3 increase in creatinine in <em>cond1time</em> hours.</p></li>
<li><p><strong>cond2time</strong> (<em>str</em>) – string, default ‘168hours’.
The amount of time for the rolling-window according to the second criterion; i.e. 50% increase in creatinine in <em>cond2time</em> hours.</p></li>
<li><p><strong>eGFR_impute</strong> (<em>bool</em>) – boolean, default False.
Choose whether or not to impute baseline creatinine values for those who have no outpatient creatinine values from 365 - 7 days prior to admission.</p></li>
<li><p><strong>add_stages</strong> (<em>bool</em>) – boolean, default True.
Choose whether or not to break the rolling-window AKI into the three stages as defined above.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Patient dataframe with AKI patients identified.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pd.DataFrame)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the dataframe is missing an expected column; e.g. if there is no age/sex/race and eGFR_impute is True.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-akiFlagger">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-akiFlagger" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright MIT License

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>